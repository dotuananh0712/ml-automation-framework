# Data Validation Test with Bad Data - Test Case 4b
# Tests: Great Expectations validation failure on bad data

name: manual_test_validation_bad
description: Validation expected to fail on bad data
pipeline_type: classification

data:
  source: tests/manual/data/churn_bad_data.parquet
  format: parquet
  target_column: churn
  feature_columns:
    - age
    - tenure_months
    - monthly_charges
    - total_charges
  train_ratio: 0.8
  validation_ratio: 0.1

data_validation:
  enabled: true
  fail_on_error: true
  generate_data_docs: true
  min_rows: 100
  expectations:
    - column: age
      expectation: expect_column_values_to_not_be_null
    - column: age
      expectation: expect_column_values_to_be_between
      kwargs:
        min_value: 0
        max_value: 120
    - column: contract_type
      expectation: expect_column_values_to_be_in_set
      kwargs:
        value_set:
          - "Month-to-month"
          - "One year"
          - "Two year"

model:
  model_type: random_forest
  hyperparameters:
    n_estimators: 30

mlflow:
  experiment_name: /manual_tests/validation_fail
